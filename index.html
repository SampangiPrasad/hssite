<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HubSpot Live Chat</title>
    <style>
      html, body {
        height: 100%;
        margin: 0;
        background-color: #fff;
      }
    </style>
  </head>
  <body>
    <script>
      // Extract email parameter
      const params = new URLSearchParams(window.location.search);
      const email = params.get("email");

      console.log("Requested chat for:", email);

      // âœ… Clear HubSpot cookies to force a new session if needed
      (function clearHubSpotCookies() {
        const hubspotCookies = [
          'hubspotutk',
          'messagesUtk',
          'hubspotapi-csrf',
          'hubspotapi-prefs'
        ];
        hubspotCookies.forEach(name => {
          // Adjust domain for GitHub Pages hosting
          document.cookie = `${name}=; path=/; domain=.sampangiprasad.github.io; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;
          document.cookie = `${name}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;
        });
        console.log("HubSpot cookies cleared");
      })();

      // Configure HubSpot Conversations with the provided email
      window.hsConversationsSettings = {
        loadImmediately: true,
        identificationEmail: email
      };
    </script>

    <!-- HubSpot chat widget -->
    <script
      type="text/javascript"
      id="hs-script-loader"
      async
      defer
      src="https://js.hs-scripts.com/243153674.js">
    </script>
  </body>
</html>

